<template><h1 id="reading-events" tabindex="-1"><a class="header-anchor" href="#reading-events" aria-hidden="true">#</a> Reading events</h1>
<p>There are two options for reading events from EventStoreDB. You can either read from an individual stream or you can read from the <code>$all</code> stream. The later will return all events in the store.</p>
<p>Each event in EventStoreDB belongs to an individual stream name. When reading events you can pick the name of the stream you want to read from. Then you can choose whether to read that stream forwards or backwards.</p>
<p>All events have a <code>StreamPosition</code>, which is the place of the event in the stream, represented by a <em>big int</em> (unsigned 64-bit integer) and a <code>Position</code> that is the events logical position that is represented by <code>CommitPosition</code> and a <code>PreparePosition</code>. This means that when reading events you have to supply a different &quot;position&quot; depending on if you are reading from a stream or the <code>$all</code> stream.</p>
<div class="custom-container tip"><p class="custom-container-title">TIP</p>
<p>Check <RouterLink to="/clients/grpc/#required-packages">connecting to EventStoreDB instructions</RouterLink> to learn how to configure and use the client SDK.</p>
</div>
<h2 id="reading-from-a-stream" tabindex="-1"><a class="header-anchor" href="#reading-from-a-stream" aria-hidden="true">#</a> Reading from a stream</h2>
<p>You can read events from individual streams, both all the events, or just a few events from the stream. You can start reading from any position in the stream, and read events both forwards and backwards. It's only possible to read events from one stream at a time. You ca also read events from the global event log, which spans across streams. Read more about it in the <a href="#reading-from-the-all-stream">Read from <code>$all</code></a> section below.</p>
<h3 id="reading-forwards" tabindex="-1"><a class="header-anchor" href="#reading-forwards" aria-hidden="true">#</a> Reading forwards</h3>
<p>The simplest way to read a stream forwards is to supply a stream name, direction and revision to start from. This can either be a <em>stream position</em> <code>Start</code> or a <em>big int</em> (unsigned 64-bit integer):</p>
<CodeGroup>
<CodeGroupItem title="C#">
<div class="language-csharp ext-cs line-numbers-mode"><pre v-pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">ReadStreamAsync</span><span class="token punctuation">(</span>
    Direction<span class="token punctuation">.</span>Forwards<span class="token punctuation">,</span>
    <span class="token string">"some-stream"</span><span class="token punctuation">,</span>
    StreamPosition<span class="token punctuation">.</span>Start<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Java">
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token class-name">ReadStreamOptions</span> options <span class="token operator">=</span> <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fromStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ReadResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readStream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResolvedEvent</span><span class="token punctuation">></span></span> events <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="JavaScript">
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readStream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">FORWARDS</span><span class="token punctuation">,</span>
  fromRevision<span class="token operator">:</span> <span class="token constant">START</span><span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Rust">
<div class="language-rust ext-rs line-numbers-mode"><pre v-pre class="language-rust"><code><span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">Start</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">forwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_stream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="TypeScript">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">readStream</span><span class="token generic class-name"><span class="token operator">&lt;</span>SomeEvent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">FORWARDS</span><span class="token punctuation">,</span>
  fromRevision<span class="token operator">:</span> <span class="token constant">START</span><span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></CodeGroupItem>
</CodeGroup>
<p>This will return an enumerable that can be iterated on:</p>
<CodeGroup>
<CodeGroupItem title="C#">
<div class="language-csharp ext-cs line-numbers-mode"><pre v-pre class="language-csharp"><code><span class="token keyword">await</span> <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> @<span class="token keyword">event</span> <span class="token keyword">in</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span>@<span class="token keyword">event</span><span class="token punctuation">.</span>Event<span class="token punctuation">.</span>Data<span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Java">
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ResolvedEvent</span> resolvedEvent <span class="token operator">:</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">RecordedEvent</span> recordedEvent <span class="token operator">=</span> resolvedEvent<span class="token punctuation">.</span><span class="token function">getOriginalEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>recordedEvent<span class="token punctuation">.</span><span class="token function">getEventData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="JavaScript">
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> resolvedEvent <span class="token keyword">of</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resolvedEvent<span class="token punctuation">.</span>event<span class="token operator">?.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Rust">
<div class="language-rust ext-rs line-numbers-mode"><pre v-pre class="language-rust"><code><span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token keyword">mut</span> events<span class="token punctuation">)</span> <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">try_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> test_event <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as_json</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">TestEvent</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Event> {:?}"</span><span class="token punctuation">,</span> test_event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="TypeScript">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> resolvedEvent <span class="token keyword">of</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resolvedEvent<span class="token punctuation">.</span>event<span class="token operator">?.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></CodeGroupItem>
</CodeGroup>
<p>There are a number of additional arguments you can provide when reading a stream, listed below.</p>
<h4 id="maxcount" tabindex="-1"><a class="header-anchor" href="#maxcount" aria-hidden="true">#</a> maxCount</h4>
<p>Passing in the max count allows you to limit the number of events returned.</p>
<h4 id="resolvelinktos" tabindex="-1"><a class="header-anchor" href="#resolvelinktos" aria-hidden="true">#</a> resolveLinkTos</h4>
<p>When using projections to create new events you can set whether the generated events are pointers to existing events. Setting this value to <code>true</code> tells EventStoreDB to return the event as well as the event linking to it.</p>
<h4 id="configureoperationoptions" tabindex="-1"><a class="header-anchor" href="#configureoperationoptions" aria-hidden="true">#</a> configureOperationOptions</h4>
<p>You can use the <code>configureOperationOptions</code> argument to provide a function that will customise settings for each operation.</p>
<h4 id="usercredentials" tabindex="-1"><a class="header-anchor" href="#usercredentials" aria-hidden="true">#</a> userCredentials</h4>
<p>The <code>userCredentials</code> argument is optional. You can use it to override the default credentials specified when creating the client instance.</p>
<CodeGroup>
<CodeGroupItem title="C#">
<div class="language-csharp ext-cs line-numbers-mode"><pre v-pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">ReadStreamAsync</span><span class="token punctuation">(</span>
    Direction<span class="token punctuation">.</span>Forwards<span class="token punctuation">,</span>
    <span class="token string">"some-stream"</span><span class="token punctuation">,</span>
    StreamPosition<span class="token punctuation">.</span>Start<span class="token punctuation">,</span>
    <span class="token named-parameter punctuation">userCredentials</span><span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserCredentials</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"changeit"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token named-parameter punctuation">cancellationToken</span><span class="token punctuation">:</span> cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Java">
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token class-name">UserCredentials</span> credentials <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserCredentials</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"changeit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ReadStreamOptions</span> options <span class="token operator">=</span> <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fromStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span>credentials<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ReadResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readStream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="JavaScript">
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> credentials <span class="token operator">=</span> <span class="token punctuation">{</span>
  username<span class="token operator">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span>
  password<span class="token operator">:</span> <span class="token string">"changeit"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readStream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">FORWARDS</span><span class="token punctuation">,</span>
  fromRevision<span class="token operator">:</span> <span class="token constant">START</span><span class="token punctuation">,</span>
  credentials<span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Rust">
<div class="language-rust ext-rs line-numbers-mode"><pre v-pre class="language-rust"><code><span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">Start</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token class-name">Credentials</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"changeit"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_stream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="TypeScript">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">const</span> credentials <span class="token operator">=</span> <span class="token punctuation">{</span>
  username<span class="token operator">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span>
  password<span class="token operator">:</span> <span class="token string">"changeit"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">readStream</span><span class="token generic class-name"><span class="token operator">&lt;</span>SomeEvent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">FORWARDS</span><span class="token punctuation">,</span>
  fromRevision<span class="token operator">:</span> <span class="token constant">START</span><span class="token punctuation">,</span>
  credentials<span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></CodeGroupItem>
</CodeGroup>
<h3 id="reading-from-a-revision" tabindex="-1"><a class="header-anchor" href="#reading-from-a-revision" aria-hidden="true">#</a> Reading from a revision</h3>
<p>Instead of providing the <code>StreamPosition</code> you can also provide a specific stream revision as a <em>big int</em> (unsigned 64-bit integer).</p>
<CodeGroup>
<CodeGroupItem title="C#">
<div class="language-csharp ext-cs line-numbers-mode"><pre v-pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">ReadStreamAsync</span><span class="token punctuation">(</span>
    Direction<span class="token punctuation">.</span>Forwards<span class="token punctuation">,</span>
    <span class="token string">"some-stream"</span><span class="token punctuation">,</span>
    <span class="token named-parameter punctuation">revision</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token named-parameter punctuation">maxCount</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Java">
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token class-name">ReadStreamOptions</span> options <span class="token operator">=</span> <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fromRevision</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ReadResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readStream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResolvedEvent</span><span class="token punctuation">></span></span> events <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="JavaScript">
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readStream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">FORWARDS</span><span class="token punctuation">,</span>
  fromRevision<span class="token operator">:</span> <span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Rust">
<div class="language-rust ext-rs line-numbers-mode"><pre v-pre class="language-rust"><code><span class="token attribute attr-name">#![allow(unused_attributes)]</span>
<span class="token attribute attr-name">#![allow(unused_imports)]</span>
<span class="token attribute attr-name">#![allow(unused_results)]</span>
<span class="token attribute attr-name">#![allow(unused_variables)]</span>

<span class="token keyword">use</span> <span class="token namespace">eventstore<span class="token punctuation">::</span></span><span class="token punctuation">{</span>
    <span class="token class-name">All</span><span class="token punctuation">,</span> <span class="token class-name">Client</span><span class="token punctuation">,</span> <span class="token class-name">Credentials</span><span class="token punctuation">,</span> <span class="token class-name">EventData</span><span class="token punctuation">,</span> <span class="token class-name">ExpectedRevision</span><span class="token punctuation">,</span> <span class="token class-name">Position</span><span class="token punctuation">,</span> <span class="token class-name">ReadAllOptions</span><span class="token punctuation">,</span> <span class="token class-name">ReadResult</span><span class="token punctuation">,</span>
    <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">,</span> <span class="token class-name">Single</span><span class="token punctuation">,</span> <span class="token class-name">StreamPosition</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">futures<span class="token punctuation">::</span></span><span class="token class-name">TryStreamExt</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">serde<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Deserialize</span><span class="token punctuation">,</span> <span class="token class-name">Serialize</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>error<span class="token punctuation">::</span></span><span class="token class-name">Error</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">uuid<span class="token punctuation">::</span></span><span class="token class-name">Uuid</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[derive(Serialize, Deserialize, Debug)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">TestEvent</span> <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> id<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
    <span class="token keyword">pub</span> important_data<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">A</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token namespace">std<span class="token punctuation">::</span>result<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token class-name">Error</span><span class="token operator">>></span><span class="token punctuation">;</span>

<span class="token keyword">pub</span> <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">read_from_stream</span><span class="token punctuation">(</span>client<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Client</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment">// region read-from-stream</span>
    <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">Start</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_stream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token comment">// endregion read-from-stream</span>

    <span class="token comment">// region iterate-stream</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token keyword">mut</span> events<span class="token punctuation">)</span> <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">try_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> test_event <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as_json</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">TestEvent</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

            <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Event> {:?}"</span><span class="token punctuation">,</span> test_event<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// endregion iterate-stream</span>

    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">read_from_stream_position</span><span class="token punctuation">(</span>client<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Client</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment">// region read-from-position</span>
    <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">Position</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_stream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token comment">// endregion read-from-position</span>

    <span class="token comment">// region iterate-stream</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token keyword">mut</span> events<span class="token punctuation">)</span> <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">try_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> test_event <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as_json</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">TestEvent</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

            <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Event> {:?}"</span><span class="token punctuation">,</span> test_event<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// endregion iterate-stream</span>

    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">read_stream_overriding_user_credentials</span><span class="token punctuation">(</span>client<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Client</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment">// region overriding-user-credentials</span>
    <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">Start</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token class-name">Credentials</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"changeit"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_stream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token comment">// endregion overriding-user-credentials</span>
    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">read_from_stream_position_check</span><span class="token punctuation">(</span>client<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Client</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment">// region checking-for-stream-presence</span>
    <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">Position</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_stream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>

    <span class="token keyword">match</span> result <span class="token punctuation">{</span>
        <span class="token class-name">ReadResult</span><span class="token punctuation">::</span><span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token keyword">mut</span> events<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">try_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> test_event <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as_json</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">TestEvent</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

                <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Event> {:?}"</span><span class="token punctuation">,</span> test_event<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">ReadResult</span><span class="token punctuation">::</span><span class="token class-name">StreamNotFound</span><span class="token punctuation">(</span>stream_name<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Stream not found: {}"</span><span class="token punctuation">,</span> stream_name<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// endregion checking-for-stream-presence</span>
    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">read_stream_backwards</span><span class="token punctuation">(</span>client<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Client</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment">// region reading-backwards</span>
    <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">End</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">backwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_stream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token keyword">mut</span> events<span class="token punctuation">)</span> <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">try_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> test_event <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as_json</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">TestEvent</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

            <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Event> {:?}"</span><span class="token punctuation">,</span> test_event<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// endregion reading-backwards</span>

    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">read_from_all_stream</span><span class="token punctuation">(</span>client<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Client</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment">// region read-from-all-stream</span>
    <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadAllOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">Start</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_all</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token class-name">Default</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token comment">// endregion read-from-all-stream</span>

    <span class="token comment">// region read-from-all-stream-iterate</span>
    <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">try_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span> <span class="token punctuation">{</span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Event> {:?}"</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// endregion read-from-all-stream-iterate</span>

    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">read_all_overriding_user_credentials</span><span class="token punctuation">(</span>client<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Client</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment">// region read-all-overriding-user-credentials</span>
    <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadAllOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token class-name">Credentials</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"changeit"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">Position</span><span class="token punctuation">(</span><span class="token class-name">Position</span> <span class="token punctuation">{</span>
            commit<span class="token punctuation">:</span> <span class="token number">1_110</span><span class="token punctuation">,</span>
            prepare<span class="token punctuation">:</span> <span class="token number">1_110</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_all</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token comment">// endregion read-all-overriding-user-credentials</span>

    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">ignore_system_events</span><span class="token punctuation">(</span>client<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Client</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment">// region ignore-system-events</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_all</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token class-name">Default</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">try_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>event_type<span class="token punctuation">.</span><span class="token function">starts_with</span><span class="token punctuation">(</span><span class="token string">"$"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Event> {:?}"</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// endregion ignore-system-events</span>

    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">read_from_all_stream_backwards</span><span class="token punctuation">(</span>client<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Client</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment">// region read-from-all-stream-backwards</span>
    <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadAllOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">End</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> <span class="token keyword">mut</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_all</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token comment">// endregion read-from-all-stream-backwards</span>

    <span class="token comment">// region read-from-all-stream-iterate</span>
    <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">try_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span> <span class="token punctuation">{</span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Event> {:?}"</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// endregion read-from-all-stream-iterate</span>

    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">filtering_out_system_events</span><span class="token punctuation">(</span>client<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Client</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_all</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token class-name">Default</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">try_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token operator">!</span>event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>event_type<span class="token punctuation">.</span><span class="token function">starts_with</span><span class="token punctuation">(</span><span class="token string">"$"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Event> {:?}"</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">read_from_stream_resolving_link_tos</span><span class="token punctuation">(</span>client<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Client</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment">// region read-from-all-stream-resolving-link-Tos</span>
    <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadAllOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">resolve_link_tos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    client<span class="token punctuation">.</span><span class="token function">read_all</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token comment">// endregion read-from-all-stream-resolving-link-Tos</span>
    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="TypeScript">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">readStream</span><span class="token generic class-name"><span class="token operator">&lt;</span>SomeEvent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">FORWARDS</span><span class="token punctuation">,</span>
  fromRevision<span class="token operator">:</span> <span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></CodeGroupItem>
</CodeGroup>
<h3 id="reading-backwards" tabindex="-1"><a class="header-anchor" href="#reading-backwards" aria-hidden="true">#</a> Reading backwards</h3>
<p>As well as being able to read a stream forwards you can also go backwards. When reading backwards, you need to set the <em>stream position</em> the end if you want to read all the events:</p>
<CodeGroup>
<CodeGroupItem title="C#">
<div class="language-csharp ext-cs line-numbers-mode"><pre v-pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">ReadStreamAsync</span><span class="token punctuation">(</span>
    Direction<span class="token punctuation">.</span>Backwards<span class="token punctuation">,</span>
    <span class="token string">"some-stream"</span><span class="token punctuation">,</span>
    StreamPosition<span class="token punctuation">.</span>End<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> e <span class="token keyword">in</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>Event<span class="token punctuation">.</span>Data<span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Java">
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token class-name">ReadStreamOptions</span> options <span class="token operator">=</span> <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">backwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fromEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ReadResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readStream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResolvedEvent</span><span class="token punctuation">></span></span> events <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ResolvedEvent</span> resolvedEvent <span class="token operator">:</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">RecordedEvent</span> recordedEvent <span class="token operator">=</span> resolvedEvent<span class="token punctuation">.</span><span class="token function">getOriginalEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>recordedEvent<span class="token punctuation">.</span><span class="token function">getEventData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="JavaScript">
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readStream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">BACKWARDS</span><span class="token punctuation">,</span>
  fromRevision<span class="token operator">:</span> <span class="token constant">END</span><span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> resolvedEvent <span class="token keyword">of</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resolvedEvent<span class="token punctuation">.</span>event<span class="token operator">?.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Rust">
<div class="language-rust ext-rs line-numbers-mode"><pre v-pre class="language-rust"><code><span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">End</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">backwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_stream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token keyword">mut</span> events<span class="token punctuation">)</span> <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">try_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> test_event <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as_json</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">TestEvent</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Event> {:?}"</span><span class="token punctuation">,</span> test_event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="TypeScript">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">readStream</span><span class="token generic class-name"><span class="token operator">&lt;</span>SomeEvent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">BACKWARDS</span><span class="token punctuation">,</span>
  fromRevision<span class="token operator">:</span> <span class="token constant">END</span><span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> resolvedEvent <span class="token keyword">of</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resolvedEvent<span class="token punctuation">.</span>event<span class="token operator">?.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></CodeGroupItem>
</CodeGroup>
<div class="custom-container tip"><p class="custom-container-title">TIP</p>
<p>You can use reading backwards to find the last position in the stream. Just read backwards one event and get the position.</p>
</div>
<h3 id="checking-if-the-stream-exists" tabindex="-1"><a class="header-anchor" href="#checking-if-the-stream-exists" aria-hidden="true">#</a> Checking if the stream exists</h3>
<p>Reading a stream returns a <code>ReadStreamResult</code>, which contains a property <code>ReadState</code>. This property can have the value <code>StreamNotFound</code> and <code>Ok</code>.</p>
<p>It is important to check the value of this field before attempting to iterate an empty stream as it will throw an exception.</p>
<p>For example:</p>
<CodeGroup>
<CodeGroupItem title="C#">
<div class="language-csharp ext-cs line-numbers-mode"><pre v-pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">ReadStreamAsync</span><span class="token punctuation">(</span>
    Direction<span class="token punctuation">.</span>Forwards<span class="token punctuation">,</span>
    <span class="token string">"some-stream"</span><span class="token punctuation">,</span>
    <span class="token named-parameter punctuation">revision</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token named-parameter punctuation">maxCount</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">await</span> result<span class="token punctuation">.</span>ReadState <span class="token operator">==</span> ReadState<span class="token punctuation">.</span>StreamNotFound<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">await</span> <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> e <span class="token keyword">in</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>Event<span class="token punctuation">.</span>Data<span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Java">
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token class-name">ReadStreamOptions</span> options <span class="token operator">=</span> <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fromRevision</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResolvedEvent</span><span class="token punctuation">></span></span> events <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token class-name">ReadResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readStream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    events <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Throwable</span> innerException <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>innerException <span class="token keyword">instanceof</span> <span class="token class-name">StreamNotFoundException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ResolvedEvent</span> resolvedEvent <span class="token operator">:</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">RecordedEvent</span> recordedEvent <span class="token operator">=</span> resolvedEvent<span class="token punctuation">.</span><span class="token function">getOriginalEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>recordedEvent<span class="token punctuation">.</span><span class="token function">getEventData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="JavaScript">
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code>
    <span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readStream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      direction<span class="token operator">:</span> <span class="token constant">FORWARDS</span><span class="token punctuation">,</span>
      fromRevision<span class="token operator">:</span> <span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      maxCount<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> resolvedEvent <span class="token keyword">of</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resolvedEvent<span class="token punctuation">.</span>event<span class="token operator">?.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token keyword">instanceof</span> <span class="token class-name">StreamNotFoundError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Rust">
<div class="language-rust ext-rs line-numbers-mode"><pre v-pre class="language-rust"><code><span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadStreamOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">Position</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_stream</span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>

<span class="token keyword">match</span> result <span class="token punctuation">{</span>
    <span class="token class-name">ReadResult</span><span class="token punctuation">::</span><span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token keyword">mut</span> events<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">try_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> test_event <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as_json</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">TestEvent</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

            <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Event> {:?}"</span><span class="token punctuation">,</span> test_event<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">ReadResult</span><span class="token punctuation">::</span><span class="token class-name">StreamNotFound</span><span class="token punctuation">(</span>stream_name<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Stream not found: {}"</span><span class="token punctuation">,</span> stream_name<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="TypeScript">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code>
    <span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">readStream</span><span class="token generic class-name"><span class="token operator">&lt;</span>SomeEvent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">"some-stream"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      direction<span class="token operator">:</span> <span class="token constant">FORWARDS</span><span class="token punctuation">,</span>
      fromRevision<span class="token operator">:</span> <span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      maxCount<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> resolvedEvent <span class="token keyword">of</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resolvedEvent<span class="token punctuation">.</span>event<span class="token operator">?.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token keyword">instanceof</span> <span class="token class-name">StreamNotFoundError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></CodeGroupItem>
</CodeGroup>
<h2 id="reading-from-the-all-stream" tabindex="-1"><a class="header-anchor" href="#reading-from-the-all-stream" aria-hidden="true">#</a> Reading from the $all stream</h2>
<p>Reading from the all stream is similar to reading from an individual stream but with some small differences. Primarily the need to provide an admin user account credentials and that you need to provide a transaction log position instead of a stream revision.</p>
<h3 id="reading-forwards-1" tabindex="-1"><a class="header-anchor" href="#reading-forwards-1" aria-hidden="true">#</a> Reading forwards</h3>
<p>The simplest way to read the <code>$all</code> stream forwards is to supply a direction and transaction log position to start from. This can either be a <em>stream position</em> <code>Start</code> or a <em>big int</em> (unsigned 64-bit integer):</p>
<CodeGroup>
<CodeGroupItem title="C#">
<div class="language-csharp ext-cs line-numbers-mode"><pre v-pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">ReadAllAsync</span><span class="token punctuation">(</span>
    Direction<span class="token punctuation">.</span>Forwards<span class="token punctuation">,</span> Position<span class="token punctuation">.</span>Start<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Java">
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token class-name">ReadAllOptions</span> options <span class="token operator">=</span> <span class="token class-name">ReadAllOptions</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fromStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ReadResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResolvedEvent</span><span class="token punctuation">></span></span> events <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="JavaScript">
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">FORWARDS</span><span class="token punctuation">,</span>
  fromPosition<span class="token operator">:</span> <span class="token constant">START</span><span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Rust">
<div class="language-rust ext-rs line-numbers-mode"><pre v-pre class="language-rust"><code><span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadAllOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">Start</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">forwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_all</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token class-name">Default</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="TypeScript">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">FORWARDS</span><span class="token punctuation">,</span>
  fromPosition<span class="token operator">:</span> <span class="token constant">START</span><span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></CodeGroupItem>
</CodeGroup>
<p>This will return an <code>AsyncEnumerable</code> that can be iterated on:</p>
<CodeGroup>
<CodeGroupItem title="C#">
<div class="language-csharp ext-cs line-numbers-mode"><pre v-pre class="language-csharp"><code><span class="token keyword">await</span> <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> e <span class="token keyword">in</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>Event<span class="token punctuation">.</span>Data<span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Java">
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ResolvedEvent</span> resolvedEvent <span class="token operator">:</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">RecordedEvent</span> recordedEvent <span class="token operator">=</span> resolvedEvent<span class="token punctuation">.</span><span class="token function">getOriginalEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>recordedEvent<span class="token punctuation">.</span><span class="token function">getEventData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="JavaScript">
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> resolvedEvent <span class="token keyword">of</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resolvedEvent<span class="token punctuation">.</span>event<span class="token operator">?.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Rust">
<div class="language-rust ext-rs line-numbers-mode"><pre v-pre class="language-rust"><code><span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">try_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span> <span class="token punctuation">{</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Event> {:?}"</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="TypeScript">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> resolvedEvent <span class="token keyword">of</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resolvedEvent<span class="token punctuation">.</span>event<span class="token operator">?.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></CodeGroupItem>
</CodeGroup>
<p>There are a number of additional arguments you can provide when reading a stream.</p>
<h4 id="maxcount-1" tabindex="-1"><a class="header-anchor" href="#maxcount-1" aria-hidden="true">#</a> maxCount</h4>
<p>Passing in the max count allows you to limit the number of events that returned.</p>
<h4 id="resolvelinktos-1" tabindex="-1"><a class="header-anchor" href="#resolvelinktos-1" aria-hidden="true">#</a> resolveLinkTos</h4>
<p>When using projections to create new events you can set whether the generated events are pointers to existing events. Setting this value to true will tell EventStoreDB to return the event as well as the event linking to it.</p>
<CodeGroup>
<CodeGroupItem title="C#">
<div class="language-csharp ext-cs line-numbers-mode"><pre v-pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">ReadAllAsync</span><span class="token punctuation">(</span>
    Direction<span class="token punctuation">.</span>Forwards<span class="token punctuation">,</span>
    Position<span class="token punctuation">.</span>Start<span class="token punctuation">,</span>
    <span class="token named-parameter punctuation">resolveLinkTos</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token named-parameter punctuation">cancellationToken</span><span class="token punctuation">:</span> cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Java">
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token class-name">ReadAllOptions</span> options <span class="token operator">=</span> <span class="token class-name">ReadAllOptions</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fromStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">resolveLinkTos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ReadResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResolvedEvent</span><span class="token punctuation">></span></span> events <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="JavaScript">
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">BACKWARDS</span><span class="token punctuation">,</span>
  fromPosition<span class="token operator">:</span> <span class="token constant">END</span><span class="token punctuation">,</span>
  resolveLinkTos<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Rust">
<div class="language-rust ext-rs line-numbers-mode"><pre v-pre class="language-rust"><code><span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadAllOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">resolve_link_tos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">read_all</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="TypeScript">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">BACKWARDS</span><span class="token punctuation">,</span>
  fromPosition<span class="token operator">:</span> <span class="token constant">END</span><span class="token punctuation">,</span>
  resolveLinkTos<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></CodeGroupItem>
</CodeGroup>
<h4 id="configureoperationoptions-1" tabindex="-1"><a class="header-anchor" href="#configureoperationoptions-1" aria-hidden="true">#</a> configureOperationOptions</h4>
<p>This argument is generic setting class for all operations that can be set on all operations executed against EventStoreDB.</p>
<h4 id="usercredentials-1" tabindex="-1"><a class="header-anchor" href="#usercredentials-1" aria-hidden="true">#</a> userCredentials</h4>
<p>The credentials used to read the data can be supplied. to be used by the subscription as follows. This will override the default credentials set on the connection.</p>
<CodeGroup>
<CodeGroupItem title="C#">
<div class="language-csharp ext-cs line-numbers-mode"><pre v-pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">ReadAllAsync</span><span class="token punctuation">(</span>
    Direction<span class="token punctuation">.</span>Forwards<span class="token punctuation">,</span>
    Position<span class="token punctuation">.</span>Start<span class="token punctuation">,</span>
    <span class="token named-parameter punctuation">userCredentials</span><span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserCredentials</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"changeit"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token named-parameter punctuation">cancellationToken</span><span class="token punctuation">:</span> cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Java">
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token class-name">UserCredentials</span> credentials <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserCredentials</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"changeit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ReadAllOptions</span> options <span class="token operator">=</span> <span class="token class-name">ReadAllOptions</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fromStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span>credentials<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ReadResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="JavaScript">
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> credentials <span class="token operator">=</span> <span class="token punctuation">{</span>
  username<span class="token operator">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span>
  password<span class="token operator">:</span> <span class="token string">"changeit"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">FORWARDS</span><span class="token punctuation">,</span>
  fromPosition<span class="token operator">:</span> <span class="token constant">START</span><span class="token punctuation">,</span>
  credentials<span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Rust">
<div class="language-rust ext-rs line-numbers-mode"><pre v-pre class="language-rust"><code><span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadAllOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token class-name">Credentials</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"changeit"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">Position</span><span class="token punctuation">(</span><span class="token class-name">Position</span> <span class="token punctuation">{</span>
        commit<span class="token punctuation">:</span> <span class="token number">1_110</span><span class="token punctuation">,</span>
        prepare<span class="token punctuation">:</span> <span class="token number">1_110</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_all</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="TypeScript">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">const</span> credentials <span class="token operator">=</span> <span class="token punctuation">{</span>
  username<span class="token operator">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span>
  password<span class="token operator">:</span> <span class="token string">"changeit"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">FORWARDS</span><span class="token punctuation">,</span>
  fromPosition<span class="token operator">:</span> <span class="token constant">START</span><span class="token punctuation">,</span>
  credentials<span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></CodeGroupItem>
</CodeGroup>
<h3 id="reading-backwards-1" tabindex="-1"><a class="header-anchor" href="#reading-backwards-1" aria-hidden="true">#</a> Reading backwards</h3>
<p>As well as being able to read a stream forwards you can also go backwards. When reading backwards is the <em>position</em> will have to be set to the end if you want to read all the events:</p>
<CodeGroup>
<CodeGroupItem title="C#">
<div class="language-csharp ext-cs line-numbers-mode"><pre v-pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">ReadAllAsync</span><span class="token punctuation">(</span>
    Direction<span class="token punctuation">.</span>Backwards<span class="token punctuation">,</span> Position<span class="token punctuation">.</span>End<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Java">
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token class-name">ReadAllOptions</span> options <span class="token operator">=</span> <span class="token class-name">ReadAllOptions</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">backwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fromEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ReadResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResolvedEvent</span><span class="token punctuation">></span></span> events <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="JavaScript">
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">BACKWARDS</span><span class="token punctuation">,</span>
  fromPosition<span class="token operator">:</span> <span class="token constant">END</span><span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Rust">
<div class="language-rust ext-rs line-numbers-mode"><pre v-pre class="language-rust"><code><span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token class-name">ReadAllOptions</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token class-name">StreamPosition</span><span class="token punctuation">::</span><span class="token class-name">End</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token keyword">mut</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_all</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>options<span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="TypeScript">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">BACKWARDS</span><span class="token punctuation">,</span>
  fromPosition<span class="token operator">:</span> <span class="token constant">END</span><span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></CodeGroupItem>
</CodeGroup>
<div class="custom-container tip"><p class="custom-container-title">TIP</p>
<p>You can use reading backwards to find the last position in the stream. Just read backwards one event and get the position.</p>
</div>
<h3 id="handling-system-events" tabindex="-1"><a class="header-anchor" href="#handling-system-events" aria-hidden="true">#</a> Handling system events</h3>
<p>When reading from the all stream EventStoreDB will also return system events. In most cases you won't need to care about these events and they should be ignored.</p>
<p>All system events begin with <code>$</code> or <code>$$</code> and can be easily ignored by checking the <code>EventType</code> property.</p>
<CodeGroup>
<CodeGroupItem title="C#">
<div class="language-csharp ext-cs line-numbers-mode"><pre v-pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">ReadAllAsync</span><span class="token punctuation">(</span>
    Direction<span class="token punctuation">.</span>Forwards<span class="token punctuation">,</span> Position<span class="token punctuation">.</span>Start<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> e <span class="token keyword">in</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>Event<span class="token punctuation">.</span>EventType<span class="token punctuation">.</span><span class="token function">StartsWith</span><span class="token punctuation">(</span><span class="token string">"$"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>Event<span class="token punctuation">.</span>Data<span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Java">
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token class-name">ReadAllOptions</span> options <span class="token operator">=</span> <span class="token class-name">ReadAllOptions</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fromStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ReadResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResolvedEvent</span><span class="token punctuation">></span></span> events <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ResolvedEvent</span> resolvedEvent <span class="token operator">:</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">RecordedEvent</span> recordedEvent <span class="token operator">=</span> resolvedEvent<span class="token punctuation">.</span><span class="token function">getOriginalEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>recordedEvent<span class="token punctuation">.</span><span class="token function">getEventType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"$"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>recordedEvent<span class="token punctuation">.</span><span class="token function">getEventData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="JavaScript">
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">FORWARDS</span><span class="token punctuation">,</span>
  fromPosition<span class="token operator">:</span> <span class="token constant">START</span><span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> resolvedEvent <span class="token keyword">of</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>resolvedEvent<span class="token punctuation">.</span>event<span class="token operator">?.</span>type<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"$"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">continue</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resolvedEvent<span class="token punctuation">.</span>event<span class="token operator">?.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="Rust">
<div class="language-rust ext-rs line-numbers-mode"><pre v-pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">read_all</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token class-name">Default</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">All</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">try_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>event_type<span class="token punctuation">.</span><span class="token function">starts_with</span><span class="token punctuation">(</span><span class="token string">"$"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Event> {:?}"</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span><span class="token function">get_original_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="TypeScript">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  direction<span class="token operator">:</span> <span class="token constant">FORWARDS</span><span class="token punctuation">,</span>
  fromPosition<span class="token operator">:</span> <span class="token constant">START</span><span class="token punctuation">,</span>
  maxCount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> resolvedEvent <span class="token keyword">of</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>resolvedEvent<span class="token punctuation">.</span>event<span class="token operator">?.</span>type<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"$"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">continue</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resolvedEvent<span class="token punctuation">.</span>event<span class="token operator">?.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></CodeGroupItem>
</CodeGroup>
</template>
